<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="onrobot_rg2_gripper">

    <xacro:macro
    name="onrobot_rg2_gripper"
    params="
        parent
        low_poly:=true
    "
    >

    <xacro:if value="${low_poly}">
        <xacro:property name="poly" value="_low_poly"/>
    </xacro:if>
    
    <xacro:if value="${not low_poly}">
        <xacro:property name="poly" value=""/>
    </xacro:if>

    <link name="onrobot_rg2_base_link">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_base_link${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_base_link.stl" />
            </geometry>
        </collision>

    </link>
    <link name="left_outer_knuckle">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_outer_knuckle${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_outer_knuckle.stl" />
            </geometry>
        </collision>
    </link>
    <link name="left_inner_knuckle">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_inner_knuckle${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_inner_knuckle.stl" />
            </geometry>
        </collision>
    </link>
    <link name="left_finger">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_finger${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_finger.stl" />
            </geometry>
        </collision>
    </link>
    <link name="right_outer_knuckle">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_outer_knuckle${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_outer_knuckle.stl" />
            </geometry>
        </collision>
    </link>
    <link name="right_inner_knuckle">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_inner_knuckle${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_inner_knuckle.stl" />
            </geometry>
        </collision>
    </link>
    <link name="right_finger">
        <visual>
            <geometry>
                <mesh filename="package://par_pkg/meshes/visual/rg2_finger${poly}.dae" />
            </geometry>
        </visual>
        <collision>
            <geometry>
                <mesh filename="package://par_pkg/meshes/collision/rg2_finger.stl" />
            </geometry>
        </collision>
    </link>
    <!-- <link name="grip_point"/> -->

    <joint name="rg2_parent_joint" type="fixed">
        <parent link="${parent}"/>
        <child link="onrobot_rg2_base_link"/>
    </joint>

    <joint name="finger_joint" type="revolute">
        <origin rpy="0 0 1.57079632679" xyz="-0.01 -0.01705 0.1207" />
        <parent link="onrobot_rg2_base_link" />
        <child link="left_outer_knuckle" />
        <axis xyz="0 1 0" />
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
    </joint>
    <joint name="right_outer_knuckle_joint" type="revolute">
        <origin rpy="0 0 -1.57079632679" xyz="0.01 0.01695 0.1207"/>
        <parent link="onrobot_rg2_base_link"/>
        <child link="right_outer_knuckle"/>
        <axis xyz="0 1 0"/>
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
        <mimic joint="finger_joint" multiplier="1" offset="0"/>
      </joint>
      <joint name="left_inner_knuckle_joint" type="revolute">
        <origin rpy="0 0 1.57079632679" xyz="0.01 -0.00755 0.1372"/>
        <parent link="onrobot_rg2_base_link"/>
        <child link="left_inner_knuckle"/>
        <axis xyz="0 1 0"/>
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
        <mimic joint="finger_joint" multiplier="1" offset="0"/>
      </joint>
      <joint name="right_inner_knuckle_joint" type="revolute">
        <origin rpy="0 0 -1.57079632679" xyz="-0.01 0.00745 0.1372"/>
        <parent link="onrobot_rg2_base_link"/>
        <child link="right_inner_knuckle"/>
        <axis xyz="0 1 0"/>
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
        <mimic joint="finger_joint" multiplier="1" offset="0"/>
      </joint>

      <joint name="left_finger_joint" type="revolute">
        <origin rpy="1.57079632679 -0.974896 0" xyz=" 0 -0.01 -0.055"/>
        <parent link="left_outer_knuckle"/>
        <child link="left_finger"/>
        <axis xyz="0 0 -1"/>
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
        <mimic joint="finger_joint" multiplier="-1" offset="0"/>
      </joint>

      <joint name="right_finger_joint" type="revolute">
        <origin rpy="1.57079632679 -0.974896 0" xyz=" 0 -0.01 -0.055"/>
        <parent link="right_outer_knuckle"/>
        <child link="right_finger"/>
        <axis xyz="0 0 1"/>
        <limit effort="1000" lower="1.87361095202" upper="3.18697121414" velocity="1.0" />
        <mimic joint="finger_joint" multiplier="1" offset="0"/>
      </joint>

      <transmission name="finger_joint_trans">
        <type>transmission_interface/SimpleTransmission</type>
        <joint name="finger_joint">
          <hardwareInterface>PositionJointInterface</hardwareInterface>
        </joint>
        <actuator name="finger_joint_motor">
          <mechanicalReduction>1</mechanicalReduction>
        </actuator>
      </transmission>

    </xacro:macro>

    
</robot>